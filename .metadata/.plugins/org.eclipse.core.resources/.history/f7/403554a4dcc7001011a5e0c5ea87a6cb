package service;

import java.util.ArrayList;

import model.Produto;

public class produtoService { // Corrigido o nome da classe para come√ßar com mai√∫scula: ProdutoService
	private ArrayList<Produto> produtos;

    // CONSTRUTOR CORRIGIDO: Inicializa a lista internamente.
	public produtoService() {
		this.produtos = new ArrayList<>();
	}
	
	//CREATE
	public void adicionarProduto(Produto produto) {
		this.produtos.add(produto);
		System.out.println("Produto adicionado com sucesso: " + produto.getNome());
	}
	//READ
	public boolean listarProdutos() {
		if(produtos.isEmpty()) {
			System.out.println("A lista de produtos est√° vazia.");
			return false;
		}
		System.out.println("\n---Lista de Produtos ---");
		for(Produto produto: produtos) {
			// Usando o toString() (se voc√™ implement√°-lo) ou exibirInformacoes()
			produto.exibirInformacoes(); 
		}
		System.out.println("------------------\n");
		return true;
	}
	public Produto buscarPorId(int id) {
		for(Produto produto : produtos) {
			if(produto.getId()==id) {
				return produto;
			}
		}
		return null;
	}
	public boolean removerProduto(int id) {
		Produto produtoParaRemover = buscarPorId(id);
		
		if(produtoParaRemover !=null) {
			produtos.remove(produtoParaRemover);
			System.out.println("Produto ID " + id + " (" + produtoParaRemover.getNome() + ") removido.");
			return true;
		}else {
			System.out.println("‚ùå Erro: Produto com ID " + id + " n√£o encontrado."); // Corrigido erro de digita√ß√£o
			return false;
		}
	}
    
    // U - UPDATE: Atualiza√ß√£o de Pre√ßo
	public boolean atualizarPreco(int id,double novoPreco) {
		Produto produtoParaAtualizar = buscarPorId(id);
		
		if(produtoParaAtualizar!=null) {
			// CORRE√á√ÉO 1: Usar setPreco, e n√£o setNome
			produtoParaAtualizar.setPreco(novoPreco); 
            
			// CORRE√á√ÉO 2: Corrigir a string de impress√£o
			System.out.println("üîÑ Pre√ßo do produto ID " + id + " (" + produtoParaAtualizar.getNome() + ") atualizado para R$" + String.format("%.2f", novoPreco));
			return true;
		}else {
			System.out.println("‚ùå Erro: Produto com ID " + id + " n√£o encontrado."); // Corrigido erro de digita√ß√£o
			return false;
		}
	}
}